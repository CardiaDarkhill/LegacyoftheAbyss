using System;

namespace HutongGames.PlayMaker.Actions
{
	// Token: 0x02001265 RID: 4709
	public sealed class HeroInvulnerability : FsmStateAction
	{
		// Token: 0x06007C43 RID: 31811 RVA: 0x002528B1 File Offset: 0x00250AB1
		public override void Reset()
		{
			this.action = null;
			this.sourceType = null;
		}

		// Token: 0x06007C44 RID: 31812 RVA: 0x002528C4 File Offset: 0x00250AC4
		public override void OnEnter()
		{
			HeroController instance = HeroController.instance;
			if (instance != null)
			{
				if ((HeroInvulnerability.Action)this.action.Value == HeroInvulnerability.Action.Add)
				{
					instance.AddInvulnerabilitySource(this.GetSource());
				}
				else
				{
					instance.RemoveInvulnerabilitySource(this.GetSource());
				}
			}
			base.Finish();
		}

		// Token: 0x06007C45 RID: 31813 RVA: 0x00252914 File Offset: 0x00250B14
		private object GetSource()
		{
			HeroInvulnerability.SourceType sourceType = (HeroInvulnerability.SourceType)this.sourceType.Value;
			if (sourceType == HeroInvulnerability.SourceType.FsmComponent)
			{
				return base.Fsm.Owner;
			}
			if (sourceType != HeroInvulnerability.SourceType.GameObject)
			{
				return base.Fsm;
			}
			return base.Owner;
		}

		// Token: 0x04007C55 RID: 31829
		[ObjectType(typeof(HeroInvulnerability.Action))]
		public FsmEnum action;

		// Token: 0x04007C56 RID: 31830
		[ObjectType(typeof(HeroInvulnerability.SourceType))]
		public FsmEnum sourceType;

		// Token: 0x02001BE4 RID: 7140
		public enum Action
		{
			// Token: 0x04009F7A RID: 40826
			Add,
			// Token: 0x04009F7B RID: 40827
			Remove
		}

		// Token: 0x02001BE5 RID: 7141
		public enum SourceType
		{
			// Token: 0x04009F7D RID: 40829
			FsmComponent,
			// Token: 0x04009F7E RID: 40830
			GameObject
		}
	}
}
